<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <link rel="stylesheet" href="../css/regist.css">
    <script src="../js/jquery-3.6.0.min.js"></script>
<!--    <link rel="stylesheet" type="text/css" href="../bootstrap/css/bootstrap.css">-->
    <script type="text/javascript" src="../bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="../js/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="head">
    <div class="top">
        <div class="logo"><a href=""><img src="../images/header-logo.png" class="logo-img"></a></div>
        <div class="top-phone">
            <div class="phone">
                <i>服务热线：</i>
                <span>123456</span>
            </div>
        </div>
    </div>
</div>
<form>
    <div class="regist-body">
        <div class="login-register">
            <div class="regist-head">
                <h2>会员注册</h2>
            </div>
            <div class="regist-input">
                    <ul>
                        <li>

                            <input type="text" placeholder="手机号码" class="input-regist phoneNo userTel" id="phone" name="userTel">
                            <p class="phoneTip"></p>
                        </li>
                        <li>
                            <input type="text" placeholder="验证码" class="input-regist1" maxlength="6" id="code" >
                            <input type="button" id="btn" class="btn btn-info btn-lg" value="获得验证码" >
                            <p class="smsTip"></p>
                        </li>
                        <li>


                            <input type="password" id="password" placeholder="登陆密码" class="input-regist password userPsd" name="userPsd" >
                            <p class="pasdTip"></p>
                        </li>
                        <li>

                            <input type="password" id="checkPassword" onkeyup="validate()" placeholder="确认密码" class="input-regist">
                            <p id="checkTip"></p>
                        </li>


                        <li class="regist-text">

                            <input type="checkbox">
                            <label>我已阅读并同意 </label><a href=""> 《当当交易条款》</a> 和 <a href="">《当当社区条款》</a>

                        </li>

                    </ul>

            </div>
            <div class="registBtn">
            <input type="button" class="registBtn" value="立即注册">
            </div>
            <div class="login">
                <label >已有账号？<a href="login.html">>去登录</a></label>
            </div>
        </div>



    </div>

</form>
<script type="text/javascript">

    var button = document.getElementById('btn');
    button.onclick = function() {
        button.disabled = 'disabled';
        var time = 60;
        var timer = setInterval(function() {
            if (time == -1) {
                clearInterval(timer)
                button.disabled = '';
                button.value = '获取验证码';
            } else {
                button.value = time + '秒后重新获取';
                time--;
            }
        }, 1000)
    }

    var sms = "";
    //发送验证码
    $(document).on('click',".btn",function (){

        var phone = $("#phone").val();
        if (phone != ""){
            sendMessage();
            $.ajax({
                url : "sendSmS",
                type : "post",
                dataType : "json",
                data: {
                    "phone" : phone
                },
                success : function (result) {
                    console.log("............");
                    alert("发送成功");
                    sms = result.data;
                }
            });
        }else {
            alert("请输入手机号");
            return false;
        }
    });
    //点击登录
    $(document).on('click','.registBtn',function(){
        console.log("sms:"+sms);
        var code = $("#code").val();
        if (code == "") {
            alert("请输入验证码");
        } else {
            if (sms == code) {
                window.location.href = "login.html";
            } else {
                alert("验证码错误");
            }

        }

    });
</script>
<script src="../js/regist.js"></script>
</body>
</html>